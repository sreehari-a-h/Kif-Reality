<script>
// Real-time Dual Calculator System with Dynamic Sliders
document.addEventListener('DOMContentLoaded', function() {
    // Mortgage Calculator Elements
    const mortgageSliders = {
        propertyPrice: document.getElementById('property-price'),
        downPayment: document.getElementById('down-payment'),
        loanAmount: document.getElementById('loan-amount'),
        loanPeriod: document.getElementById('loan-period'),
        interestRate: document.getElementById('interest-rate')
    };
    
    const mortgageDisplays = {
        priceDisplay: document.getElementById('price-display'),
        downDisplay: document.getElementById('down-display'),
        loanDisplay: document.getElementById('loan-display'),
        periodDisplay: document.getElementById('period-display'),
        rateDisplay: document.getElementById('rate-display'),
        downPercentage: document.getElementById('down-percentage'),
        loanPercentage: document.getElementById('loan-percentage'),
        displayRate: document.getElementById('display-rate'),
        monthlyPayment: document.getElementById('monthly-payment')
    };
    
    // ROI Calculator Elements
    const roiSliders = {
        purchasePrice: document.getElementById('purchase-price'),
        currentValue: document.getElementById('current-value'),
        annualRent: document.getElementById('annual-rent'),
        annualExpenses: document.getElementById('annual-expenses'),
        holdingPeriod: document.getElementById('holding-period')
    };
    
    const roiDisplays = {
        purchaseDisplay: document.getElementById('purchase-display'),
        currentDisplay: document.getElementById('current-display'),
        rentDisplay: document.getElementById('rent-display'),
        expensesDisplay: document.getElementById('expenses-display'),
        holdingDisplay: document.getElementById('holding-display'),
        totalROIDisplay: document.getElementById('total-roi-display'),
        annualROIDisplay: document.getElementById('annual-roi-display')
    };
    
    // Residency status buttons
    const statusButtons = document.querySelectorAll('.status-btn');
    
    // Format number with commas
    function formatNumber(num) {
        return new Intl.NumberFormat('en-AE').format(Math.round(num));
    }
    
    // Format currency
    function formatCurrency(num) {
        return new Intl.NumberFormat('en-AE').format(Math.round(num)) + ' AED';
    }
    
    // Format percentage
    function formatPercent(num) {
        return num.toFixed(2) + '%';
    }
    
    // MORTGAGE CALCULATOR FUNCTIONS
    function updateMortgageCalculations() {
        const price = parseFloat(mortgageSliders.propertyPrice.value);
        const down = parseFloat(mortgageSliders.downPayment.value);
        const loan = parseFloat(mortgageSliders.loanAmount.value);
        const period = parseFloat(mortgageSliders.loanPeriod.value);
        const rate = parseFloat(mortgageSliders.interestRate.value);
        
        // Update displays
        mortgageDisplays.priceDisplay.textContent = formatNumber(price);
        mortgageDisplays.downDisplay.textContent = formatNumber(down);
        mortgageDisplays.loanDisplay.textContent = formatNumber(loan);
        mortgageDisplays.periodDisplay.textContent = period;
        mortgageDisplays.rateDisplay.textContent = rate;
        mortgageDisplays.displayRate.textContent = rate + '%';
        
        // Update percentages
        mortgageDisplays.downPercentage.textContent = Math.round((down / price) * 100) + '%';
        mortgageDisplays.loanPercentage.textContent = Math.round((loan / price) * 100) + '%';
        
        // Calculate monthly payment
        const monthlyRate = (rate / 100) / 12;
        const numberOfPayments = period * 12;
        
        let monthly = 0;
        if (monthlyRate > 0) {
            monthly = loan * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
                     (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
        } else {
            monthly = loan / numberOfPayments;
        }
        
        mortgageDisplays.monthlyPayment.textContent = formatCurrency(monthly);
    }
    
    function syncMortgageSliders() {
        const price = parseFloat(mortgageSliders.propertyPrice.value);
        const down = parseFloat(mortgageSliders.downPayment.value);
        const loan = price - down;
        
        mortgageSliders.loanAmount.value = loan;
        mortgageSliders.downPayment.max = price * 0.8;
        mortgageSliders.loanAmount.min = price * 0.2;
        mortgageSliders.loanAmount.max = price * 0.8;
    }
    
    // ROI CALCULATOR FUNCTIONS
    function updateROICalculations() {
        const purchasePrice = parseFloat(roiSliders.purchasePrice.value);
        const currentValue = parseFloat(roiSliders.currentValue.value);
        const annualRent = parseFloat(roiSliders.annualRent.value);
        const annualExpenses = parseFloat(roiSliders.annualExpenses.value);
        const holdingPeriod = parseFloat(roiSliders.holdingPeriod.value);
        
        // Update displays
        roiDisplays.purchaseDisplay.textContent = formatNumber(purchasePrice);
        roiDisplays.currentDisplay.textContent = formatNumber(currentValue);
        roiDisplays.rentDisplay.textContent = formatNumber(annualRent);
        roiDisplays.expensesDisplay.textContent = formatNumber(annualExpenses);
        roiDisplays.holdingDisplay.textContent = holdingPeriod;
        
        // Calculate ROI
        const capitalAppreciation = currentValue - purchasePrice;
        const netAnnualRent = annualRent - annualExpenses;
        const totalRentalIncome = netAnnualRent * holdingPeriod;
        
        // Total ROI = (Capital Appreciation + Total Rental Income) / Purchase Price * 100
        const totalROI = ((capitalAppreciation + totalRentalIncome) / purchasePrice) * 100;
        const annualROI = totalROI / holdingPeriod;
        
        // Update ROI displays
        roiDisplays.totalROIDisplay.textContent = formatPercent(totalROI);
        roiDisplays.annualROIDisplay.textContent = formatPercent(annualROI);
    }
    
    // MORTGAGE EVENT LISTENERS
    mortgageSliders.propertyPrice.addEventListener('input', function() {
        const price = parseFloat(this.value);
        mortgageSliders.downPayment.min = price * 0.2;
        mortgageSliders.downPayment.max = price * 0.8;
        
        const currentDownPercent = parseFloat(mortgageSliders.downPayment.value) / parseFloat(mortgageSliders.propertyPrice.value);
        mortgageSliders.downPayment.value = Math.max(mortgageSliders.downPayment.min, Math.min(mortgageSliders.downPayment.max, price * currentDownPercent));
        
        syncMortgageSliders();
        updateMortgageCalculations();
    });
    
    mortgageSliders.downPayment.addEventListener('input', function() {
        syncMortgageSliders();
        updateMortgageCalculations();
    });
    
    mortgageSliders.loanAmount.addEventListener('input', function() {
        const price = parseFloat(mortgageSliders.propertyPrice.value);
        const loan = parseFloat(this.value);
        const down = price - loan;
        mortgageSliders.downPayment.value = down;
        updateMortgageCalculations();
    });
    
    mortgageSliders.loanPeriod.addEventListener('input', updateMortgageCalculations);
    mortgageSliders.interestRate.addEventListener('input', updateMortgageCalculations);
    
    // Residency status buttons
    statusButtons.forEach(button => {
        button.addEventListener('click', function() {
            statusButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            
            const status = this.getAttribute('data-value');
            if (status === 'uae-national') {
                mortgageSliders.interestRate.value = 3.25;
            } else if (status === 'uae-resident') {
                mortgageSliders.interestRate.value = 3.75;
            } else {
                mortgageSliders.interestRate.value = 4.25;
            }
            
            updateMortgageCalculations();
        });
    });
    
    // ROI EVENT LISTENERS
    roiSliders.purchasePrice.addEventListener('input', updateROICalculations);
    roiSliders.currentValue.addEventListener('input', updateROICalculations);
    roiSliders.annualRent.addEventListener('input', updateROICalculations);
    roiSliders.annualExpenses.addEventListener('input', updateROICalculations);
    roiSliders.holdingPeriod.addEventListener('input', updateROICalculations);
    
    // Initialize both calculators
    syncMortgageSliders();
    updateMortgageCalculations();
    updateROICalculations();
});
</script>{% extends 'base.html' %}

{% block title %}Home - KIF Realty{% endblock %}

{% load static %}

{% block extra_css %}
<style>
/* Hero Section - OBSIDIAN Style */
.hero {
    height: 100vh;
    min-height: 700px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    background: radial-gradient(ellipse at center, rgba(42, 42, 42, 0.3) 0%, var(--obsidian-black) 70%);
    overflow: hidden;
    margin-top: 0;
}

.hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--accent-gradient);
    opacity: 0.05;
}

.hero-particles {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
}

.hero-badge {
    display: inline-block;
    padding: 0.5rem 1.5rem;
    background: var(--glass-bg);
    border: 1px solid var(--border-subtle);
    border-radius: 50px;
    font-size: 0.9rem;
    font-weight: 500;
    margin-bottom: 2rem;
    backdrop-filter: blur(10px);
    color: var(--primary-gold);
}

.hero-content-container {
    position: relative;
    z-index: 2;
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 3rem;
}

.hero-content {
    text-align: center;
    color: white;
}

.hero-content h1 {
    font-family: 'Playfair Display', serif;
    font-size: 3.8rem;
    font-weight: 300;
    margin-bottom: 2.5rem;
    line-height: 1.1;
    background: linear-gradient(135deg, var(--text-light), var(--rose-gold));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: -0.02em;
    animation: titleGlow 3s ease-in-out infinite alternate;
}

.hero-subtitle {
    font-size: 1.4rem;
    margin-bottom: 3.5rem;
    color: var(--text-muted);
    font-weight: 300;
    line-height: 1.8;
    opacity: 0.9;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
}

.cta-buttons {
    display: flex;
    gap: 2.5rem;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 3.5rem;
}

/* Services Section - OBSIDIAN Style */
.services-section {
    background: linear-gradient(135deg, var(--charcoal-gray) 0%, var(--obsidian-black) 100%);
    position: relative;
    overflow: hidden;
    padding: 4rem 3rem;
}

.services-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--accent-gradient);
    opacity: 0.02;
}

.section-title {
    text-align: center;
    margin-bottom: 2rem;
    position: relative;
    z-index: 2;
}

.section-title h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 3.5rem;
    font-weight: 400;
    color: var(--rose-gold);
    margin-top: 1rem;
    margin-bottom: 1rem;
    letter-spacing: -0.01em;
}

.section-title p {
    font-size: 1.2rem;
    color: var(--text-muted);
    max-width: 800px;
    margin: 0 auto;
    line-height: 1.8;
    font-weight: 300;
}

.services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 1rem;
    max-width: 1400px;
    margin: 0 auto;
    position: relative;
    z-index: 2;
}

.service-card {
    background: linear-gradient(145deg, var(--charcoal-gray), var(--medium-gray));
    border: 1px solid rgba(232, 180, 160, 0.1);
    border-radius: 25px;
    padding: 1rem;
    text-align: center;
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.service-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--accent-gradient);
    opacity: 0;
    transition: opacity 0.5s ease;
}

.service-card:hover::before {
    opacity: 0.05;
}

.service-card:hover {
    transform: translateY(-15px) scale(1.02);
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
    border-color: rgba(232, 180, 160, 0.3);
}

.service-content {
    position: relative;
    z-index: 1;
}

.service-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto 2rem;
    background: var(--accent-gradient);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.4s ease;
}

.service-icon i {
    font-size: 2.2rem;
    color: var(--obsidian-black);
    transition: all 0.4s ease;
}

.service-card:hover .service-icon {
    transform: scale(1.15) rotate(5deg);
    box-shadow: 0 15px 30px rgba(232, 180, 160, 0.4);
}

.service-card h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.8rem;
    font-weight: 600;
    color: var(--text-light);
    margin-bottom: 1.5rem;
    letter-spacing: -0.01em;
}

.service-card p {
    color: var(--text-muted);
    line-height: 1.7;
    font-weight: 300;
}

/* Locations Section - OBSIDIAN Style */
.locations-section {
    padding: 4rem 3rem;
    position: relative;
    background: var(--obsidian-black);
    overflow: hidden;
}

.locations-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 30% 70%, rgba(232, 180, 160, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 70% 30%, rgba(244, 208, 63, 0.06) 0%, transparent 50%);
}

.locations-content {
    position: relative;
    z-index: 2;
    max-width: 1400px;
    margin: 0 auto;
}

.locations-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.2rem;
    margin-top: 4rem;
}

.location-item {
    background: linear-gradient(145deg, var(--charcoal-gray), var(--medium-gray));
    padding: 2.5rem 2rem;
    border-radius: 20px;
    text-align: center;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid rgba(232, 180, 160, 0.1);
    position: relative;
    overflow: hidden;
}

.location-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--accent-gradient);
    opacity: 0;
    transition: opacity 0.5s ease;
}

.location-item:hover::before {
    opacity: 0.05;
}

.location-item:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    border-color: rgba(232, 180, 160, 0.3);
}

.location-icon {
    width: 60px;
    height: 60px;
    margin: 0 auto 1.5rem;
    background: var(--accent-gradient);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 1;
    transition: all 0.4s ease;
}

.location-icon i {
    font-size: 1.6rem;
    color: var(--obsidian-black);
}

.location-item:hover .location-icon {
    transform: scale(1.1) rotate(10deg);
}

.location-item h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-light);
    margin-bottom: 0.8rem;
    position: relative;
    z-index: 1;
}

.location-item p {
    color: var(--text-muted);
    font-size: 0.95rem;
    position: relative;
    z-index: 1;
    font-weight: 300;
}

/* Why Choose Section - OBSIDIAN Style */
.why-choose-section {
    padding: 4rem 3rem;
    background: linear-gradient(135deg, var(--medium-gray) 0%, var(--charcoal-gray) 100%);
    position: relative;
    overflow: hidden;
}

.why-choose-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--accent-gradient);
    opacity: 0.02;
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 1.2rem;
    max-width: 1200px;
    margin: 4rem auto 0;
    position: relative;
    z-index: 2;
}

.feature-card {
    background: linear-gradient(145deg, var(--charcoal-gray), var(--medium-gray));
    padding: 1.5rem 1.5rem;
    border-radius: 25px;
    text-align: center;
    border: 1px solid rgba(232, 180, 160, 0.1);
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.feature-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--accent-gradient);
    opacity: 0;
    transition: opacity 0.5s ease;
}

.feature-card:hover::before {
    opacity: 0.05;
}

.feature-card:hover {
    transform: translateY(-15px) scale(1.02);
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
    border-color: rgba(232, 180, 160, 0.3);
}

.feature-number {
    font-family: 'Cormorant Garamond', serif;
    font-size: 4rem;
    font-weight: 600;
    background: var(--accent-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: block;
    margin-bottom: 1.5rem;
    position: relative;
    z-index: 1;
}

.feature-card h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.6rem;
    font-weight: 600;
    color: var(--text-light);
    margin-bottom: 1.5rem;
    position: relative;
    z-index: 1;
}

.feature-card p {
    color: var(--text-muted);
    line-height: 1.7;
    font-weight: 300;
    position: relative;
    z-index: 1;
}

/* Calculator Container - Dark Theme Design */
.calculators-section {
    padding: 4rem 3rem;
    background: linear-gradient(135deg, var(--charcoal-gray) 0%, var(--obsidian-black) 100%);
    position: relative;
    overflow: hidden;
}

.calculators-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--accent-gradient);
    opacity: 0.02;
}

.calculators-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: 2rem;
    max-width: 1400px;
    margin: 2rem auto 0;
    position: relative;
    z-index: 2;
}

.calculator-card {
    background: linear-gradient(145deg, var(--charcoal-gray), var(--medium-gray));
    border: 1px solid rgba(232, 180, 160, 0.1);
    border-radius: 25px;
    padding: 2rem;
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.calculator-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--accent-gradient);
    opacity: 0;
    transition: opacity 0.5s ease;
}

.calculator-card:hover::before {
    opacity: 0.05;
}

.calculator-card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
    border-color: rgba(232, 180, 160, 0.3);
}

/* Header Styling */
.calculator-header {
    text-align: center;
    margin-bottom: 2rem;
    position: relative;
    z-index: 1;
}

.calculator-header h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.8rem;
    font-weight: 600;
    color: var(--text-light);
    margin: 0 0 1rem 0;
    letter-spacing: -0.01em;
}

.calculator-header p {
    color: var(--text-muted);
    line-height: 1.6;
    font-weight: 300;
    font-size: 0.95rem;
}

/* Result Display - Main Feature */
.result-display {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: linear-gradient(145deg, var(--obsidian-black), var(--charcoal-gray));
    border-radius: 15px;
    border: 1px solid rgba(232, 180, 160, 0.2);
    position: relative;
    z-index: 1;
}

.result-main, .result-secondary {
    text-align: center;
}

.result-label-small {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1rem;
    font-weight: 400;
    color: var(--text-muted);
    display: block;
    margin-bottom: 0.5rem;
    text-transform: lowercase;
}

.result-value-large {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 2.8rem;
    font-weight: 700;
    color: var(--rose-gold);
    line-height: 1.2;
    text-shadow: 0 2px 10px rgba(232, 180, 160, 0.3);
}

.result-value-medium {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 2rem;
    font-weight: 600;
    color: var(--rose-gold);
    line-height: 1.2;
    text-shadow: 0 1px 5px rgba(232, 180, 160, 0.2);
}

/* Form Styling */
.calculator-form {
    margin-bottom: 0;
    position: relative;
    z-index: 1;
}

.form-group {
    margin-bottom: 2rem;
}

.form-group label {
    display: block;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
    font-weight: 500;
    color: var(--text-light);
    margin-bottom: 0.75rem;
}

/* Button Group for Residency Status */
.button-group {
    display: flex;
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid rgba(232, 180, 160, 0.2);
    background: linear-gradient(145deg, var(--obsidian-black), var(--charcoal-gray));
}

.status-btn {
    flex: 1;
    padding: 0.9rem 1.2rem;
    border: none;
    background: transparent;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1rem;
    font-weight: 400;
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.3s ease;
    border-right: 1px solid rgba(232, 180, 160, 0.2);
}

.status-btn:last-child {
    border-right: none;
}

.status-btn.active {
    background: var(--accent-gradient);
    color: var(--obsidian-black);
    font-weight: 600;
}

.status-btn:not(.active):hover {
    background: rgba(232, 180, 160, 0.1);
    color: var(--text-light);
}

/* Modern Dark Slider Styling */
.slider-container {
    position: relative;
}

.slider {
    -webkit-appearance: none;
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: linear-gradient(90deg, var(--obsidian-black), var(--charcoal-gray));
    outline: none;
    cursor: pointer;
    margin: 0.75rem 0;
    border: 1px solid rgba(232, 180, 160, 0.2);
}

.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--accent-gradient);
    cursor: pointer;
    border: 2px solid var(--obsidian-black);
    box-shadow: 0 4px 12px rgba(232, 180, 160, 0.4);
    transition: all 0.3s ease;
}

.slider::-webkit-slider-thumb:hover {
    transform: scale(1.15);
    box-shadow: 0 6px 20px rgba(232, 180, 160, 0.6);
}

.slider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--accent-gradient);
    cursor: pointer;
    border: 2px solid var(--obsidian-black);
    box-shadow: 0 4px 12px rgba(232, 180, 160, 0.4);
    transition: all 0.3s ease;
}

/* Slider Values Display */
.slider-values {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: 'Cormorant Garamond', serif;
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-top: 0.5rem;
}

.current-value {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-weight: 600;
    color: var(--text-light);
    font-size: 1rem;
}

.percentage-value {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-weight: 600;
    color: var(--rose-gold);
    font-size: 1rem;
}

/* CTA Section - OBSIDIAN Style */
.cta-section {
    padding: 4rem 3rem;
    background: var(--obsidian-black);
    text-align: center;
    position: relative;
    overflow: hidden;
}

.cta-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at center, rgba(232, 180, 160, 0.1) 0%, transparent 70%);
}

.cta-content {
    max-width: 900px;
    margin: 0 auto;
    position: relative;
    z-index: 2;
}

.cta-content h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 3.5rem;
    font-weight: 400;
    color: var(--text-light);
    margin-bottom: 2rem;
    line-height: 1.2;
    letter-spacing: -0.01em;
}

.cta-content p {
    font-size: 1.2rem;
    color: var(--text-muted);
    line-height: 1.8;
    margin-bottom: 2rem;
    font-weight: 300;
}

.btn-primary-custom {
    background: var(--accent-gradient);
    color: var(--obsidian-black);
    padding: 1rem 1.2rem;
    border-radius: 50px;
    text-decoration: none;
    font-weight: 700;
    font-size: 0.9rem;
    display: inline-block;
    transition: all 0.4s ease;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    position: relative;
    overflow: hidden;
    margin-right: 2rem;
}

.btn-primary-custom::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s;
}

.btn-primary-custom:hover::before {
    left: 100%;
}

.btn-primary-custom:hover {
    transform: translateY(-4px);
    box-shadow: 0 20px 45px rgba(232, 180, 160, 0.6);
    color: var(--obsidian-black);
}

.btn-secondary-custom {
    background: transparent;
    color: var(--rose-gold);
    padding: 1rem 1.2rem;
    border: 2px solid var(--rose-gold);
    border-radius: 50px;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.9rem;
    display: inline-block;
    transition: all 0.4s ease;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.btn-secondary-custom:hover {
    background: var(--rose-gold);
    color: var(--obsidian-black);
    transform: translateY(-4px);
    box-shadow: 0 15px 35px rgba(232, 180, 160, 0.4);
}

/* Enhanced animations */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-in {
    animation: fadeInUp 0.8s ease forwards;
}

/* Loading animations */
.services-grid .service-card {
    opacity: 0;
    transform: translateY(30px);
    animation: fadeInUp 0.8s ease forwards;
}

.services-grid .service-card:nth-child(1) { animation-delay: 0.1s; }
.services-grid .service-card:nth-child(2) { animation-delay: 0.2s; }
.services-grid .service-card:nth-child(3) { animation-delay: 0.3s; }
.services-grid .service-card:nth-child(4) { animation-delay: 0.4s; }
.services-grid .service-card:nth-child(5) { animation-delay: 0.5s; }
.services-grid .service-card:nth-child(6) { animation-delay: 0.6s; }

/* Mobile responsive design */
@media (max-width: 1200px) {
    .calculators-container {
        grid-template-columns: 1fr;
        max-width: 800px;
    }
}

@media (max-width: 992px) {
    .hero-content h1 {
        font-size: 2.5rem;
    }
    
    .section-title h2 {
        font-size: 3rem;
    }
    
    .services-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .locations-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
    
    .features-grid {
        grid-template-columns: 1fr;
    }
    
    .calculators-container {
        grid-template-columns: 1fr;
        gap: 2rem;
        max-width: 700px;
    }
    
    .calculator-card {
        padding: 1.8rem;
    }
}

@media (max-width: 768px) {
    .hero {
        height: 80vh;
        min-height: 500px;
        padding: 2rem 0;
        margin-top: 80px;
    }

    .hero-content-container {
        margin-top: 2%;
        padding: 0 1.5rem;
    }
    
    .hero-content h1 {
        font-size: 2.8rem;
    }
    
    .hero-subtitle {
        font-size: 1.2rem;
    }
    
    .section-title h2 {
        font-size: 2.5rem;
    }
    
    .services-section,
    .locations-section,
    .why-choose-section,
    .cta-section,
    .calculators-section {
        padding: 3rem 1rem;
    }
    
    .cta-buttons {
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
    }
    
    .btn-primary-custom,
    .btn-secondary-custom {
        width: 100%;
        max-width: 300px;
        margin-right: 0;
        margin-bottom: 1rem;
    }
    
    .cta-content h2 {
        font-size: 2.5rem;
    }
    
    /* Calculator mobile styles */
    .calculators-container {
        max-width: 100%;
        margin: 1.5rem auto 0;
        padding: 0 1rem;
        gap: 1.5rem;
    }
    
    .calculator-card {
        padding: 1.5rem;
    }
    
    .calculator-header h3 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
    }
    
    .calculator-header p {
        font-size: 0.9rem;
        line-height: 1.5;
    }
    
    .result-display {
        flex-direction: column;
        gap: 1rem;
        padding: 1.25rem;
        text-align: center;
    }
    
    .result-value-large {
        font-size: 1.8rem;
    }
    
    .result-value-medium {
        font-size: 1.2rem;
    }
    
    .button-group {
        flex-direction: column;
    }
    
    .status-btn {
        border-right: none;
        border-bottom: 1px solid rgba(232, 180, 160, 0.2);
        padding: 0.8rem 1rem;
    }
    
    .status-btn:last-child {
        border-bottom: none;
    }
    
    .slider-values {
        font-size: 0.75rem;
    }
    
    .current-value, .percentage-value {
        font-size: 0.8rem;
    }
    
    .form-group {
        margin-bottom: 1.5rem;
    }
}

@media (max-width: 480px) {
    .hero-content h1 {
        font-size: 2.2rem;
    }
    
    .section-title h2 {
        font-size: 2rem;
    }
    
    .service-card,
    .feature-card {
        padding: 2rem 1.5rem;
    }
    
    .cta-content h2 {
        font-size: 2rem;
    }
    
    .calculators-section {
        padding: 2rem 0.5rem;
    }
    
    .calculator-card {
        padding: 1.2rem;
        margin: 0 0.5rem;
    }
    
    .calculator-header h3 {
        font-size: 1.3rem;
        margin-bottom: 0.8rem;
    }
    
    .calculator-header p {
        font-size: 0.85rem;
        line-height: 1.4;
    }
    
    .result-display {
        padding: 1rem;
        gap: 0.8rem;
    }
    
    .result-value-large {
        font-size: 2rem;
    }
    
    .result-value-medium {
        font-size: 1.4rem;
    }
    
    .result-label-small {
        font-size: 0.9rem;
    }
    
    .form-group label {
        font-size: 0.95rem;
    }
    
    .slider-values {
        font-size: 0.8rem;
    }
    
    .current-value, .percentage-value {
        font-size: 0.85rem;
    }
    
    .status-btn {
        font-size: 0.9rem;
        padding: 0.7rem 0.8rem;
    }
}

@media (max-width: 360px) {
    .hero-content h1 {
        font-size: 2rem;
    }
    
    .section-title h2 {
        font-size: 1.8rem;
    }
    
    .calculators-section {
        padding: 1.5rem 0.25rem;
    }
    
    .calculator-card {
        padding: 1rem;
        margin: 0 0.25rem;
    }
    
    .calculator-header h3 {
        font-size: 1.2rem;
        margin-bottom: 0.6rem;
    }
    
    .calculator-header p {
        font-size: 0.8rem;
        line-height: 1.3;
    }
    
    .result-display {
        padding: 0.8rem;
        gap: 0.6rem;
    }
    
    .result-value-large {
        font-size: 1.8rem;
    }
    
    .result-value-medium {
        font-size: 1.2rem;
    }
    
    .result-label-small {
        font-size: 0.85rem;
    }
    
    .form-group label {
        font-size: 0.9rem;
    }
    
    .slider-values {
        font-size: 0.75rem;
    }
    
    .current-value, .percentage-value {
        font-size: 0.8rem;
    }
    
    .status-btn {
        font-size: 0.85rem;
        padding: 0.6rem 0.7rem;
    }
}
</style>
{% endblock %}

{% load custom_filters %}

{% block content %}

<!-- Hero Section -->
<section id="home" class="hero">
    <div class="hero-particles"></div>
    <div class="hero-content-container">
        <div class="hero-content">
            <div class="hero-badge">
                    <i class="fas fa-star"></i>
                    Dubai's Premier Real Estate Partner
                </div>
            <h1>Property expert in Dubai, UAE</h1>
            <p class="hero-subtitle">Offplan | Ready to move project | Land broker | Property investment consultant | Super Agent for new Developers</p>
            <div class="cta-buttons">
                <a href="/properties" class="btn btn-primary">Explore Properties</a>
                <a href="/contact" class="btn btn-secondary">Our Services</a>
            </div>
        </div>
    </div>
</section>

<!-- Services Section -->
<section id="services" class="services-section">
    <div class="section-title">
        <h2>Comprehensive Dubai Real Estate Services</h2>
        <p>From luxury villas for sale in Dubai to off-plan properties with flexible payment plans - we provide end-to-end solutions for every investor, family, and business owner in the UAE property market.</p>
    </div>
    <div class="services-grid">
        <div class="service-card">
            <div class="service-content">
                <div class="service-icon">
                    <i class="fas fa-building"></i>
                </div>
                <h3>Buy Apartments in Dubai 2025</h3>
                <p>Studio apartments in JVC, luxury penthouses in Downtown Dubai, and waterfront properties in Dubai Marina with expert ROI analysis and market insights.</p>
            </div>
        </div>

        <div class="service-card">
            <div class="service-content">
                <div class="service-icon">
                    <i class="fas fa-home"></i>
                </div>
                <h3>Luxury Villas & Townhouses</h3>
                <p>Beachfront villas in Palm Jumeirah, golf course homes in Dubai Hills, and affordable villas in Dubailand with premium locations and exclusive communities.</p>
            </div>
        </div>

        <div class="service-card">
            <div class="service-content">
                <div class="service-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>Off-Plan Investment Properties</h3>
                <p>Direct from developers with flexible payment plans, high-growth communities, and guaranteed returns on Dubai freehold property investments.</p>
            </div>
        </div>

        <div class="service-card">
            <div class="service-content">
                <div class="service-icon">
                    <i class="fas fa-briefcase"></i>
                </div>
                <h3>Commercial Property Dubai</h3>
                <p>Office spaces in Business Bay, retail units in prime locations, and mixed-use buildings with strategic commercial plots for business growth.</p>
            </div>
        </div>

        <div class="service-card">
            <div class="service-content">
                <div class="service-icon">
                    <i class="fas fa-key"></i>
                </div>
                <h3>Property Management</h3>
                <p>End-to-end portfolio care, short-term rental management, and fully furnished properties with consistent passive income generation.</p>
            </div>
        </div>

        <div class="service-card">
            <div class="service-content">
                <div class="service-icon">
                    <i class="fas fa-calculator"></i>
                </div>
                <h3>ROI Analysis & Investment Planning</h3>
                <p>Data-backed Dubai property ROI calculation, market trend analysis, and personalized investment strategies for maximum returns.</p>
            </div>
        </div>
    </div>
</section>

<!-- Top Locations Section -->
<section class="locations-section">
    <div class="locations-bg"></div>
    <div class="locations-content">
        <div class="section-title">
            <h2 style="color: white;">Prime Dubai Locations We Cover</h2>
            <p style="color: rgba(255,255,255,0.9);">From iconic Downtown Dubai to emerging Dubai South - discover the best property investment opportunities across Dubai's most sought-after communities.</p>
        </div>
        <div class="locations-grid">
            <div class="location-item">
                <div class="location-icon"><i class="fas fa-city"></i></div>
                <h3>Downtown Dubai</h3>
                <p>Burj Khalifa views & iconic lifestyle</p>
            </div>
            <div class="location-item">
                <div class="location-icon"><i class="fas fa-water"></i></div>
                <h3>Dubai Marina</h3>
                <p>Waterfront living with nightlife & retail</p>
            </div>
            <div class="location-item">
                <div class="location-icon"><i class="fas fa-umbrella-beach"></i></div>
                <h3>Palm Jumeirah</h3>
                <p>Ultra-luxury beachfront properties</p>
            </div>
            <div class="location-item">
                <div class="location-icon"><i class="fas fa-golf-ball"></i></div>
                <h3>Dubai Hills Estate</h3>
                <p>Golf course communities & family living</p>
            </div>
            <div class="location-item">
                <div class="location-icon"><i class="fas fa-building"></i></div>
                <h3>Business Bay</h3>
                <p>Central commercial & residential hub</p>
            </div>
            <div class="location-item">
                <div class="location-icon"><i class="fas fa-plane-departure"></i></div>
                <h3>Dubai South</h3>
                <p>Future growth near Al Maktoum Airport</p>
            </div>
            <div class="location-item">
                <div class="location-icon"><i class="fas fa-home"></i></div>
                <h3>Jumeirah Village Circle</h3>
                <p>Affordable apartments & townhouses</p>
            </div>
            <div class="location-item">
                <div class="location-icon"><i class="fas fa-umbrella-beach"></i></div>
                <h3>Ras Al Khaimah</h3>
                <p>Next frontier of luxury developments</p>
            </div>
        </div>
    </div>
</section>

<!-- Why Choose Us Section -->
<section class="why-choose-section">
    <div class="section-title">
        <h2>Why Choose KIF Realty for Dubai Property Investment?</h2>
        <p>Ranked among the top real estate brokers in Dubai, we deliver transparent, reliable, and profitable property solutions since 2011.</p>
    </div>
    <div class="features-grid">
        <div class="feature-card">
            <span class="feature-number">13+</span>
            <h3>Years of Market Leadership</h3>
            <p>Deep expertise in Dubai real estate market dynamics, developer relationships, and investment strategies.</p>
        </div>
        <div class="feature-card">
            <span class="feature-number">100%</span>
            <h3>RERA Certified Team</h3>
            <p>Licensed real estate professionals ensuring compliance, transparency, and ethical business practices.</p>
        </div>
        <div class="feature-card">
            <span class="feature-number">24/7</span>
            <h3>Customer Support</h3>
            <p>Dedicated support throughout your property journey - from initial consultation to post-purchase services.</p>
        </div>
    </div>
</section>

<!-- Investment Calculator Section -->
<section class="calculators-section">
    <div class="section-title">
        <h2>Investment Planning Tools</h2>
        <p>Make informed decisions with our advanced calculator designed specifically for Dubai real estate investments. Plan your mortgage payments with precision.</p>
    </div>
    
    <div class="calculators-container">
        <div class="calculator-card">
            <div class="calculator-header">
                <h3>Estimate your monthly mortgage payment</h3>
                <p>Calculate your monthly mortgage payments for Dubai properties with flexible payment terms and competitive interest rates.</p>
            </div>
            
            <!-- Primary Result Display -->
            <div class="result-display">
                <div class="result-main">
                    <span class="result-label-small">Monthly payment</span>
                    <div class="result-value-large" id="monthly-payment">4,936 AED</div>
                </div>
                <div class="result-secondary">
                    <span class="result-label-small">with interest rate of</span>
                    <div class="result-value-medium" id="display-rate">3.75%</div>
                </div>
            </div>
            
            <div class="calculator-form">
                <div class="form-group">
                    <label for="property-price">Purchase Price</label>
                    <div class="slider-container">
                        <input type="range" id="property-price" min="200000" max="20000000" value="1200000" step="50000" class="slider">
                        <div class="slider-values">
                            <span class="min-value">200,000 AED</span>
                            <span class="current-value" id="price-display">1,200,000</span>
                            <span class="max-value">20,000,000 AED</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="residency-status">Residency Status</label>
                    <div class="button-group">
                        <button type="button" class="status-btn" data-value="uae-national">UAE national</button>
                        <button type="button" class="status-btn active" data-value="uae-resident">UAE resident</button>
                        <button type="button" class="status-btn" data-value="non-resident">Non resident</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="down-payment">Down payment</label>
                    <div class="slider-container">
                        <input type="range" id="down-payment" min="240000" max="960000" value="240000" step="10000" class="slider">
                        <div class="slider-values">
                            <span class="min-value">240,000 AED</span>
                            <span class="current-value" id="down-display">240,000</span>
                            <span class="percentage-value" id="down-percentage">20%</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="loan-amount">Loan amount</label>
                    <div class="slider-container">
                        <input type="range" id="loan-amount" min="240000" max="960000" value="960000" step="10000" class="slider">
                        <div class="slider-values">
                            <span class="min-value">240,000 AED</span>
                            <span class="current-value" id="loan-display">960,000</span>
                            <span class="percentage-value" id="loan-percentage">80%</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="loan-period">Loan Period</label>
                    <div class="slider-container">
                        <input type="range" id="loan-period" min="1" max="25" value="25" step="1" class="slider">
                        <div class="slider-values">
                            <span class="min-value">1 year</span>
                            <span class="current-value" id="period-display">25</span>
                            <span class="max-value">25 years</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="interest-rate">Interest rate</label>
                    <div class="slider-container">
                        <input type="range" id="interest-rate" min="1" max="10" value="3.75" step="0.01" class="slider">
                        <div class="slider-values">
                            <span class="min-value">1%</span>
                            <span class="current-value" id="rate-display">3.75</span>
                            <span class="max-value">10%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ROI Calculator -->
        <div class="calculator-card">
            <div class="calculator-header">
                <h3>Calculate your investment ROI</h3>
                <p>Analyze potential returns on your Dubai property investment with comprehensive ROI calculations and market insights.</p>
            </div>
            
            <!-- Primary Result Display -->
            <div class="result-display">
                <div class="result-main">
                    <span class="result-label-small">Total ROI</span>
                    <div class="result-value-large" id="total-roi-display">25.6%</div>
                </div>
                <div class="result-secondary">
                    <span class="result-label-small">Annual return</span>
                    <div class="result-value-medium" id="annual-roi-display">5.12%</div>
                </div>
            </div>
            
            <div class="calculator-form">
                <div class="form-group">
                    <label for="purchase-price">Purchase Price</label>
                    <div class="slider-container">
                        <input type="range" id="purchase-price" min="500000" max="10000000" value="2500000" step="50000" class="slider">
                        <div class="slider-values">
                            <span class="min-value">500,000 AED</span>
                            <span class="current-value" id="purchase-display">2,500,000</span>
                            <span class="max-value">10,000,000 AED</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="current-value">Current Market Value</label>
                    <div class="slider-container">
                        <input type="range" id="current-value" min="500000" max="12000000" value="3000000" step="50000" class="slider">
                        <div class="slider-values">
                            <span class="min-value">500,000 AED</span>
                            <span class="current-value" id="current-display">3,000,000</span>
                            <span class="max-value">12,000,000 AED</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="annual-rent">Annual Rental Income</label>
                    <div class="slider-container">
                        <input type="range" id="annual-rent" min="50000" max="800000" value="180000" step="5000" class="slider">
                        <div class="slider-values">
                            <span class="min-value">50,000 AED</span>
                            <span class="current-value" id="rent-display">180,000</span>
                            <span class="max-value">800,000 AED</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="annual-expenses">Annual Expenses</label>
                    <div class="slider-container">
                        <input type="range" id="annual-expenses" min="5000" max="100000" value="25000" step="1000" class="slider">
                        <div class="slider-values">
                            <span class="min-value">5,000 AED</span>
                            <span class="current-value" id="expenses-display">25,000</span>
                            <span class="max-value">100,000 AED</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="holding-period">Holding Period</label>
                    <div class="slider-container">
                        <input type="range" id="holding-period" min="1" max="20" value="5" step="1" class="slider">
                        <div class="slider-values">
                            <span class="min-value">1 year</span>
                            <span class="current-value" id="holding-display">5</span>
                            <span class="max-value">20 years</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
    <div class="cta-content">
        <h2>Ready to Invest in Dubai Real Estate?</h2>
        <p>Join thousands of satisfied investors who chose KIF Realty for their Dubai property investments. Get expert guidance on buying apartments, luxury villas, and off-plan properties with guaranteed returns.</p>
        <div class="cta-buttons">
            <a href="/contact" class="btn-primary-custom">Start Your Investment Journey</a>
            <a href="/properties" class="btn-secondary-custom">Browse Properties</a>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
// Real-time Mortgage Calculator with Dynamic Sliders
document.addEventListener('DOMContentLoaded', function() {
    // Get all slider elements
    const propertyPrice = document.getElementById('property-price');
    const downPayment = document.getElementById('down-payment');
    const loanAmount = document.getElementById('loan-amount');
    const loanPeriod = document.getElementById('loan-period');
    const interestRate = document.getElementById('interest-rate');
    
    // Get display elements
    const priceDisplay = document.getElementById('price-display');
    const downDisplay = document.getElementById('down-display');
    const loanDisplay = document.getElementById('loan-display');
    const periodDisplay = document.getElementById('period-display');
    const rateDisplay = document.getElementById('rate-display');
    const downPercentage = document.getElementById('down-percentage');
    const loanPercentage = document.getElementById('loan-percentage');
    const displayRate = document.getElementById('display-rate');
    const monthlyPayment = document.getElementById('monthly-payment');
    
    // Residency status buttons
    const statusButtons = document.querySelectorAll('.status-btn');
    
    // Format number with commas
    function formatNumber(num) {
        return new Intl.NumberFormat('en-AE').format(num);
    }
    
    // Format currency
    function formatCurrency(num) {
        return new Intl.NumberFormat('en-AE').format(Math.round(num)) + ' AED';
    }
    
    // Calculate and update everything
    function updateCalculations() {
        const price = parseFloat(propertyPrice.value);
        const down = parseFloat(downPayment.value);
        const loan = parseFloat(loanAmount.value);
        const period = parseFloat(loanPeriod.value);
        const rate = parseFloat(interestRate.value);
        
        // Update displays
        priceDisplay.textContent = formatNumber(price);
        downDisplay.textContent = formatNumber(down);
        loanDisplay.textContent = formatNumber(loan);
        periodDisplay.textContent = period;
        rateDisplay.textContent = rate;
        displayRate.textContent = rate + '%';
        
        // Update percentages
        downPercentage.textContent = Math.round((down / price) * 100) + '%';
        loanPercentage.textContent = Math.round((loan / price) * 100) + '%';
        
        // Calculate monthly payment
        const monthlyRate = (rate / 100) / 12;
        const numberOfPayments = period * 12;
        
        let monthly = 0;
        if (monthlyRate > 0) {
            monthly = loan * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
                     (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
        } else {
            monthly = loan / numberOfPayments;
        }
        
        monthlyPayment.textContent = formatCurrency(monthly);
    }
    
    // Sync sliders - when down payment changes, update loan amount
    function syncSliders() {
        const price = parseFloat(propertyPrice.value);
        const down = parseFloat(downPayment.value);
        const loan = price - down;
        
        loanAmount.value = loan;
        downPayment.max = price * 0.8; // Max 80% down payment
        loanAmount.min = price * 0.2;  // Min 20% loan
        loanAmount.max = price * 0.8;  // Max 80% loan
    }
    
    // Property price slider
    propertyPrice.addEventListener('input', function() {
        const price = parseFloat(this.value);
        // Update down payment and loan amount ranges
        downPayment.min = price * 0.2;  // Min 20% down
        downPayment.max = price * 0.8;  // Max 80% down
        
        // Adjust current values proportionally
        const currentDownPercent = parseFloat(downPayment.value) / parseFloat(propertyPrice.value);
        downPayment.value = Math.max(downPayment.min, Math.min(downPayment.max, price * currentDownPercent));
        
        syncSliders();
        updateCalculations();
    });
    
    // Down payment slider
    downPayment.addEventListener('input', function() {
        syncSliders();
        updateCalculations();
    });
    
    // Loan amount slider
    loanAmount.addEventListener('input', function() {
        const price = parseFloat(propertyPrice.value);
        const loan = parseFloat(this.value);
        const down = price - loan;
        downPayment.value = down;
        updateCalculations();
    });
    
    // Other sliders
    loanPeriod.addEventListener('input', updateCalculations);
    interestRate.addEventListener('input', updateCalculations);
    
    // Residency status buttons
    statusButtons.forEach(button => {
        button.addEventListener('click', function() {
            statusButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            
            // Adjust interest rate based on residency
            const status = this.getAttribute('data-value');
            if (status === 'uae-national') {
                interestRate.value = 3.25;
            } else if (status === 'uae-resident') {
                interestRate.value = 3.75;
            } else {
                interestRate.value = 4.25;
            }
            
            updateCalculations();
        });
    });
    
    // Initial calculation
    syncSliders();
    updateCalculations();
});
</script>
{% endblock %}